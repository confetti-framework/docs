<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="theme-color" content="#00828e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#00828e"><link rel="stylesheet" href="https://use.typekit.net/ins2wgm.css"><link rel="shortcut icon" href="https://raw.githubusercontent.com/confetti-framework/docs/gh-pages/favicon.ico"><title>Request Lifecycle | Confetti</title><meta name="description" content="Confetti is a Go (Golang) web application framework with an expressive, elegant syntax. Confetti combines the elegance of Confetti and the simplicity of Go.">
    <link rel="modulepreload" href="/docs/assets/app.cd0b8009.js"><link rel="modulepreload" href="/docs/assets/lifecycle.html.9e7e5dc5.js"><link rel="modulepreload" href="/docs/assets/lifecycle.html.50685c53.js"><link rel="prefetch" href="/docs/assets/index.html.31d933e5.js"><link rel="prefetch" href="/docs/assets/commands.html.3788f9ac.js"><link rel="prefetch" href="/docs/assets/installation.html.32406f42.js"><link rel="prefetch" href="/docs/assets/meet.html.e944717d.js"><link rel="prefetch" href="/docs/assets/your-first-project.html.ff559353.js"><link rel="prefetch" href="/docs/assets/configuration.html.5bdcbf00.js"><link rel="prefetch" href="/docs/assets/errors.html.8295fc2a.js"><link rel="prefetch" href="/docs/assets/logging.html.8c006b84.js"><link rel="prefetch" href="/docs/assets/middleware.html.79a05bf5.js"><link rel="prefetch" href="/docs/assets/requests.html.441f6caf.js"><link rel="prefetch" href="/docs/assets/responses.html.06162f92.js"><link rel="prefetch" href="/docs/assets/routing.html.bcaa900b.js"><link rel="prefetch" href="/docs/assets/validation.html.ff6302cf.js"><link rel="prefetch" href="/docs/assets/404.html.98e87f94.js"><link rel="prefetch" href="/docs/assets/index.html.f8fb5d4c.js"><link rel="prefetch" href="/docs/assets/commands.html.0b4d8072.js"><link rel="prefetch" href="/docs/assets/installation.html.d38aa07d.js"><link rel="prefetch" href="/docs/assets/meet.html.cf94c9dc.js"><link rel="prefetch" href="/docs/assets/your-first-project.html.c4ddb184.js"><link rel="prefetch" href="/docs/assets/configuration.html.75259ff3.js"><link rel="prefetch" href="/docs/assets/errors.html.ae15d5a4.js"><link rel="prefetch" href="/docs/assets/logging.html.74cd8eea.js"><link rel="prefetch" href="/docs/assets/middleware.html.8364a2f2.js"><link rel="prefetch" href="/docs/assets/requests.html.9be86f9b.js"><link rel="prefetch" href="/docs/assets/responses.html.14cdee6a.js"><link rel="prefetch" href="/docs/assets/routing.html.3f1824f9.js"><link rel="prefetch" href="/docs/assets/validation.html.dace1c05.js"><link rel="prefetch" href="/docs/assets/404.html.5b40c3f7.js">
    <link rel="stylesheet" href="/docs/assets/style.63a1126c.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/docs/" class=""><img class="logo" src="https://avatars1.githubusercontent.com/u/57274804?s=400&amp;u=058242df13e206950c08efd68a540445ce4da17f&amp;v=4" alt="Confetti"><span class="site-name can-hide">Confetti</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/confetti-framework/confetti" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://www.patreon.com/confetti_framework" rel="noopener noreferrer" target="_blank" aria-label="Becoming a sponsor"><!--[--><!--]--> Becoming a sponsor <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/confetti-framework/confetti" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://www.patreon.com/confetti_framework" rel="noopener noreferrer" target="_blank" aria-label="Becoming a sponsor"><!--[--><!--]--> Becoming a sponsor <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Get Started <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/get-started/meet.html" class="sidebar-item" aria-label="Meet Confetti"><!--[--><!--]--> Meet Confetti <!--[--><!--]--></a><!----></li><li><a href="/docs/get-started/installation.html" class="sidebar-item" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a><!----></li><li><a href="/docs/get-started/your-first-project.html" class="sidebar-item" aria-label="Your First Project"><!--[--><!--]--> Your First Project <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">Architecture Concepts <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/architecture-concepts/lifecycle.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Request Lifecycle"><!--[--><!--]--> Request Lifecycle <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/architecture-concepts/lifecycle.html#introduction" class="router-link-active router-link-exact-active sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/architecture-concepts/lifecycle.html#lifecycle-overview" class="router-link-active router-link-exact-active sidebar-item" aria-label="Lifecycle Overview"><!--[--><!--]--> Lifecycle Overview <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/architecture-concepts/lifecycle.html#_1-receiving-the-request" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. Receiving the Request"><!--[--><!--]--> 1. Receiving the Request <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/architecture-concepts/lifecycle.html#_2-routing-the-request" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. Routing the Request"><!--[--><!--]--> 2. Routing the Request <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/architecture-concepts/lifecycle.html#_3-middleware-processing" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. Middleware Processing"><!--[--><!--]--> 3. Middleware Processing <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/architecture-concepts/lifecycle.html#_4-controller-execution" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. Controller Execution"><!--[--><!--]--> 4. Controller Execution <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/architecture-concepts/lifecycle.html#_5-response-processing" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. Response Processing"><!--[--><!--]--> 5. Response Processing <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/architecture-concepts/lifecycle.html#_6-sending-the-response" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. Sending the Response"><!--[--><!--]--> 6. Sending the Response <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/docs/architecture-concepts/container" class="sidebar-item" aria-label="/architecture-concepts/container"><!--[--><!--]--> /architecture-concepts/container <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">The Basics <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/the-basics/configuration.html" class="sidebar-item" aria-label="Configuration"><!--[--><!--]--> Configuration <!--[--><!--]--></a><!----></li><li><a href="/docs/the-basics/routing.html" class="sidebar-item" aria-label="Routing"><!--[--><!--]--> Routing <!--[--><!--]--></a><!----></li><li><a href="/docs/the-basics/middleware.html" class="sidebar-item" aria-label="Middleware"><!--[--><!--]--> Middleware <!--[--><!--]--></a><!----></li><li><a href="/docs/the-basics/requests.html" class="sidebar-item" aria-label="Requests"><!--[--><!--]--> Requests <!--[--><!--]--></a><!----></li><li><a href="/docs/the-basics/responses.html" class="sidebar-item" aria-label="Responses"><!--[--><!--]--> Responses <!--[--><!--]--></a><!----></li><li><a href="/docs/the-basics/validation.html" class="sidebar-item" aria-label="Validation"><!--[--><!--]--> Validation <!--[--><!--]--></a><!----></li><li><a href="/docs/the-basics/errors.html" class="sidebar-item" aria-label="Errors"><!--[--><!--]--> Errors <!--[--><!--]--></a><!----></li><li><a href="/docs/the-basics/logging.html" class="sidebar-item" aria-label="Logging and Error Reporting"><!--[--><!--]--> Logging and Error Reporting <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Digging Deeper <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/digging-deeper/commands.html" class="sidebar-item" aria-label="/digging-deeper/commands"><!--[--><!--]--> /digging-deeper/commands <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="request-lifecycle" tabindex="-1"><a class="header-anchor" href="#request-lifecycle" aria-hidden="true">#</a> Request Lifecycle</h1><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2><p>When using any tool in the &quot;real world,&quot; you feel more confident if you understand how that tool works. Application development is no different. When you understand how your development tools function, you feel more comfortable and confident using them.</p><p>The goal of this document is to provide you with a high-level overview of how the Confetti framework works. By gaining a better understanding of the framework&#39;s inner workings, everything feels less &quot;magical,&quot; and you will be more confident when building your applications.</p><p>If you don&#39;t immediately grasp all the concepts and terminology, don&#39;t worry! The key is to get a general sense of the request lifecycle. As you explore other sections of the documentation, your understanding will deepen naturally.</p><h2 id="lifecycle-overview" tabindex="-1"><a class="header-anchor" href="#lifecycle-overview" aria-hidden="true">#</a> Lifecycle Overview</h2><p>When you start the Confetti API server, the request lifecycle begins in <code>cmd/api/main.go</code>. This file checks the given command. For example, when you run:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>go run cmd/api/main.go api:serve
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>The framework executes <code>cmd/api/command/api_serve_command.go</code>, which initializes an HTTP server.</p><p>From there, incoming requests follow a structured flow before returning a response. Below is a step-by-step breakdown of the process:</p><h3 id="_1-receiving-the-request" tabindex="-1"><a class="header-anchor" href="#_1-receiving-the-request" aria-hidden="true">#</a> 1. Receiving the Request</h3><p>When a client (e.g., a web browser or API client) sends a request, it reaches the HTTP server that was started in <code>api_serve_command.go</code>. This server listens for incoming requests and forwards them to the appropriate route handler.</p><h3 id="_2-routing-the-request" tabindex="-1"><a class="header-anchor" href="#_2-routing-the-request" aria-hidden="true">#</a> 2. Routing the Request</h3><p>Confetti determines which route should handle the request based on the defined routes. These routes are registered using the <code>handler.New(&quot;METHOD PATH&quot;, handlerFunc)</code> function.</p><p>For example, if a request is sent to <code>GET /status</code>, it will be mapped to the appropriate handler function inside <code>internal/status/status_index_controller.go</code>.</p><h3 id="_3-middleware-processing" tabindex="-1"><a class="header-anchor" href="#_3-middleware-processing" aria-hidden="true">#</a> 3. Middleware Processing</h3><p>Before the request reaches its final destination (the controller), it passes through middleware functions. Middleware acts as a processing layer that can modify or inspect the request and response.</p><p>Common middleware functions include:</p><ul><li><strong>Authentication Middleware</strong>: Verifies if the request is coming from an authorized user.</li><li><strong>Logging Middleware</strong>: Logs details about the request for debugging or monitoring.</li><li><strong>CORS Middleware</strong>: Adds necessary headers to allow cross-origin requests.</li></ul><p>Each middleware function processes the request before passing it to the next middleware in the chain.</p><h3 id="_4-controller-execution" tabindex="-1"><a class="header-anchor" href="#_4-controller-execution" aria-hidden="true">#</a> 4. Controller Execution</h3><p>After passing through the middleware, the request reaches its designated <strong>controller</strong>. A controller is responsible for handling the request logic, processing any required data, and preparing a response.</p><p>For example, the <code>status_index_controller.go</code> file handles requests related to system status. If the request is for <code>/status</code>, the controller gathers relevant data (such as system uptime or server health) and prepares a response.</p><h3 id="_5-response-processing" tabindex="-1"><a class="header-anchor" href="#_5-response-processing" aria-hidden="true">#</a> 5. Response Processing</h3><p>Once the controller has generated a response, the request goes back through the middleware in <strong>reverse order</strong>. This allows middleware functions to modify or inspect the outgoing response before it is sent back to the client.</p><p>For example, a middleware function might:</p><ul><li>Format the response into JSON or another format.</li><li>Add security headers.</li><li>Log the response time.</li></ul><h3 id="_6-sending-the-response" tabindex="-1"><a class="header-anchor" href="#_6-sending-the-response" aria-hidden="true">#</a> 6. Sending the Response</h3><p>After processing is complete, the final response is sent back to the client. The client then receives the response and displays the data accordingly (e.g., rendering JSON in an API client or updating a web page).</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: reindert@plugandpay.nl">Reindert Vetter</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: vaggelisyfantis@gmail.com">Vaggelis Yfantis</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: reindertvetter@gmail.com">reindert-vetter</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/docs/architecture-concepts/container" class="" aria-label="/architecture-concepts/container"><!--[--><!--]--> /architecture-concepts/container <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/docs/assets/app.cd0b8009.js" defer></script>
  </body>
</html>
