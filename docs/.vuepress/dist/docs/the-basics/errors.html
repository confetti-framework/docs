<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Error Handling | Confetti</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/confetti-framework/docs/gh-pages/favicon.ico">
    <meta name="description" content="Confetti is a Go web application framework with an expressive, elegant syntax. Confetti combines the elegance of Laravel and the strictness of Go (Golang).">
    <meta name="theme-color" content="#00828e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#00828e">
    
    <link rel="preload" href="/docs/assets/css/0.styles.2491b91e.css" as="style"><link rel="preload" href="/docs/assets/js/app.82cfd2e7.js" as="script"><link rel="preload" href="/docs/assets/js/3.b99d79b9.js" as="script"><link rel="preload" href="/docs/assets/js/14.f35a05b9.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.669dafe9.js"><link rel="prefetch" href="/docs/assets/js/11.e420cec3.js"><link rel="prefetch" href="/docs/assets/js/12.12193430.js"><link rel="prefetch" href="/docs/assets/js/13.3efa342b.js"><link rel="prefetch" href="/docs/assets/js/15.fce98362.js"><link rel="prefetch" href="/docs/assets/js/16.79c306b9.js"><link rel="prefetch" href="/docs/assets/js/17.c751715c.js"><link rel="prefetch" href="/docs/assets/js/18.e4430088.js"><link rel="prefetch" href="/docs/assets/js/19.558214e9.js"><link rel="prefetch" href="/docs/assets/js/20.b9433790.js"><link rel="prefetch" href="/docs/assets/js/21.a0c87fa0.js"><link rel="prefetch" href="/docs/assets/js/22.9370c121.js"><link rel="prefetch" href="/docs/assets/js/4.cefaadd4.js"><link rel="prefetch" href="/docs/assets/js/5.0ede061b.js"><link rel="prefetch" href="/docs/assets/js/6.8eb9201a.js"><link rel="prefetch" href="/docs/assets/js/7.1c2d570e.js"><link rel="prefetch" href="/docs/assets/js/8.7677db82.js"><link rel="prefetch" href="/docs/assets/js/9.fa216d10.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.40a53132.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.2491b91e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="https://avatars1.githubusercontent.com/u/57274804?s=400&amp;u=058242df13e206950c08efd68a540445ce4da17f&amp;v=4" alt="Confetti" class="logo"> <span class="site-name can-hide">Confetti</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/docs/" class="nav-link router-link-active">
  Documentation
</a></div><div class="nav-item"><a href="https://github.com/confetti-framework/confetti" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/confetti-framework/docs/tree/main/docs/docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Edit
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/docs/" class="nav-link router-link-active">
  Documentation
</a></div><div class="nav-item"><a href="https://github.com/confetti-framework/confetti" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/confetti-framework/docs/tree/main/docs/docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Edit
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Get Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/docs/get-started/meet.html" class="sidebar-link">Meet Confetti</a></li><li><a href="/docs/docs/get-started/installation.html" class="sidebar-link">Installation</a></li><li><a href="/docs/docs/get-started/configuration.html" class="sidebar-link">Configuration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Architecture Concepts</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/docs/architecture-concepts/lifecycle.html" class="sidebar-link">Request Lifecycle</a></li><li><a href="/docs/docs/architecture-concepts/container.html" class="sidebar-link">Service Container</a></li><li><a href="/docs/docs/architecture-concepts/providers.html" class="sidebar-link">Service Providers</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>The Basics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/docs/the-basics/routing.html" class="sidebar-link">Routing</a></li><li><a href="/docs/docs/the-basics/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/docs/docs/the-basics/requests.html" class="sidebar-link">Requests</a></li><li><a href="/docs/docs/the-basics/responses.html" class="sidebar-link">Responses</a></li><li><a href="/docs/docs/the-basics/views.html" class="sidebar-link">Views</a></li><li><a href="/docs/docs/the-basics/validation.html" class="sidebar-link">Validation</a></li><li><a href="/docs/docs/the-basics/errors.html" aria-current="page" class="active sidebar-link">Error Handling</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#panic-and-return-errors" class="sidebar-link">Panic And Return Errors</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#return-errors" class="sidebar-link">Return Errors</a></li><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#panic" class="sidebar-link">Panic</a></li><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#message-convention" class="sidebar-link">Message Convention</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#helpers" class="sidebar-link">Helpers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#is" class="sidebar-link">Is</a></li><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#as" class="sidebar-link">As</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#defining-errors" class="sidebar-link">Defining Errors</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#global-log-context" class="sidebar-link">Global Log Context</a></li><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#information-provision" class="sidebar-link">Information Provision</a></li><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#ignoring-errors-by-type" class="sidebar-link">Ignoring Errors By Type</a></li><li class="sidebar-sub-header"><a href="/docs/docs/the-basics/errors.html#custom-http-error-pages" class="sidebar-link">Custom HTTP Error Pages</a></li></ul></li></ul></li><li><a href="/docs/docs/the-basics/logging.html" class="sidebar-link">Logging</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="error-handling"><a href="#error-handling" class="header-anchor">#</a> Error Handling</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Error handling is very different in Go than in other languages. With Go the following applies: The more time you spend
on errors, the faster bugs can be found. It therefore deserves its own chapter.</p> <h2 id="panic-and-return-errors"><a href="#panic-and-return-errors" class="header-anchor">#</a> Panic And Return Errors</h2> <p>In other languages you throw an exception (or error). If the caller wants to do something based on that error, then you
have to catch the error. This is very different with Go. The error is passed on until you can do something with it.
If you want to stop the process and just fire the error, you can use <code>panic</code>.</p> <h3 id="return-errors"><a href="#return-errors" class="header-anchor">#</a> Return Errors</h3> <p>The most common way is to return the error from the function:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;github.com/confetti-framework/errors&quot;</span>

<span class="token keyword">var</span> NoUserFound <span class="token operator">=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;no user found&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>model<span class="token punctuation">.</span>User<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> users<span class="token punctuation">.</span><span class="token function">NewUnregistredUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NoUserFound
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> user<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The following example shows how the caller can handle the error.</p> <div class="language-go extra-class"><pre class="language-go"><code>user<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> err <span class="token operator">==</span> NoUserFound <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="ignore-errors"><a href="#ignore-errors" class="header-anchor">#</a> Ignore Errors</h4> <p>If you want to use the default user when the error occurs, you could ignore the error by an underscore:</p> <div class="language-go extra-class"><pre class="language-go"><code>user<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="wrap"><a href="#wrap" class="header-anchor">#</a> Wrap</h4> <p>By applying multiple layers, you can add more information to the error. You can use the <code>Wrap</code> method to prefix a
message (with <code>validation error: no user found</code> as a result).</p> <div class="language-go extra-class"><pre class="language-go"><code>user<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
err<span class="token punctuation">.</span><span class="token function">Wrap</span><span class="token punctuation">(</span><span class="token string">&quot;validation error&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="unwrap"><a href="#unwrap" class="header-anchor">#</a> Unwrap</h4> <p>To receive the original error (after <code>Wrap</code>), you can use <code>Unwrap</code> (with <code>no user found</code> as a result):</p> <div class="language-go extra-class"><pre class="language-go"><code>err <span class="token operator">:=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;no user found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Wrap</span><span class="token punctuation">(</span><span class="token string">&quot;validation error&quot;</span><span class="token punctuation">)</span>
err<span class="token punctuation">.</span><span class="token function">Unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="apply-stack-trace"><a href="#apply-stack-trace" class="header-anchor">#</a> Apply Stack Trace</h4> <p>If you have a standard error, it does not contain a stack trace. Use function <code>Wrap</code> or <code>WithStack</code> To put the trace on
it:</p> <div class="language-go extra-class"><pre class="language-go"><code>errors<span class="token punctuation">.</span><span class="token function">Wrap</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> <span class="token string">&quot;can't connect to database&quot;</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code>errors<span class="token punctuation">.</span><span class="token function">WithStack</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
</code></pre></div><h4 id="log-level"><a href="#log-level" class="header-anchor">#</a> Log Level</h4> <p>The default log level is <code>Emergency</code>. To determine the log level you can use the <code>Level</code> method:</p> <div class="language-go extra-class"><pre class="language-go"><code>errros<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;username not found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Level</span><span class="token punctuation">(</span>log_level<span class="token punctuation">.</span>INFO<span class="token punctuation">)</span>
</code></pre></div><h4 id="http-status"><a href="#http-status" class="header-anchor">#</a> HTTP Status</h4> <p>The default HTTP status is <code>500 Internal Server Error</code>. To determine the response status you can use the <code>Status</code>
method:</p> <div class="language-go extra-class"><pre class="language-go"><code>err <span class="token operator">:=</span> errros<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;username not found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusNotFound<span class="token punctuation">)</span>
<span class="token keyword">return</span> outcome<span class="token punctuation">.</span><span class="token function">Html</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
</code></pre></div><h4 id="custom"><a href="#custom" class="header-anchor">#</a> Custom</h4> <p>Do you want to add extra data to an error? In other languages you would extend a class. Go has a SOLID solution for
this: Each error can be wrapped in multiple structs. To add data to an error you just have to create a wrapper
yourself (which then also contains the original error). If you want to add an error code to your error, you can make te
following:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">WithCode</span><span class="token punctuation">(</span>err <span class="token builtin">error</span><span class="token punctuation">,</span> code <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>withCode <span class="token punctuation">{</span>
    <span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>withCode<span class="token punctuation">{</span>
        err<span class="token punctuation">,</span>
        code<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> withCode <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    cause <span class="token builtin">error</span>
    code <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>w <span class="token operator">*</span>withCode<span class="token punctuation">)</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> w<span class="token punctuation">.</span>cause<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; with code &quot;</span> <span class="token operator">+</span> w<span class="token punctuation">.</span>code
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>w <span class="token operator">*</span>withCode<span class="token punctuation">)</span> <span class="token function">Unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> w<span class="token punctuation">.</span>cause
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>w <span class="token operator">*</span>withCode<span class="token punctuation">)</span> <span class="token function">Code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> w<span class="token punctuation">.</span>code
<span class="token punctuation">}</span>
</code></pre></div><p>Then the error can build up like this:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">WithCode</span><span class="token punctuation">(</span>errros<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;username not found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;external_error&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>In method <code>Error()</code> above, we put 'code' behind the message. But if you want to adjust the response, you can determine
this in <code>ResponseServiceProvider</code>.</p> <h3 id="panic"><a href="#panic" class="header-anchor">#</a> Panic</h3> <p>In case of a server error where the request cannot proceed, you could choose to use <code>panic</code>:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>model<span class="token punctuation">.</span>User<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    con<span class="token punctuation">,</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Connection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">!=</span> <span class="token boolean">nil</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Confetti automatically ensures that the correct http response is generated.</p> <blockquote><p>Using panic can save you a lot of time. However, if you want to build a robust application, use <code>panic</code> only for critical or unexpected errors.</p></blockquote> <h3 id="message-convention"><a href="#message-convention" class="header-anchor">#</a> Message Convention</h3> <p>As you can see above, you can supplement the error with more information. Therefore, it is a convention to use a
lowercase letter at the beginning of an error. Also, a dot at the end of the sentence can cause that the sentence can't
be made longer. The errors are eventually automatically capitalized at the beginning of the sense.</p> <h2 id="helpers"><a href="#helpers" class="header-anchor">#</a> Helpers</h2> <h3 id="is"><a href="#is" class="header-anchor">#</a> Is</h3> <p>An error can be made up of several layers with structs. If you want to know if a certain struct is present, you can use
the <code>Is</code> helper. In the running example, <code>validateUser()</code> returns a <code>validationError</code> error:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> noUserFound <span class="token operator">=</span> <span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;no user found&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> validationError <span class="token operator">=</span> <span class="token function">Wrap</span><span class="token punctuation">(</span>noUserFound<span class="token punctuation">,</span> <span class="token string">&quot;validation error&quot;</span><span class="token punctuation">)</span>

err <span class="token operator">:=</span> <span class="token function">validateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> errors<span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> noUserFound<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// validationError contains noUserFound error</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="as"><a href="#as" class="header-anchor">#</a> As</h3> <p>If you want to retrieve a specific struct, you can use the <code>As</code> helper. Before calling <code>As</code>, you have to define what
needs to be searched and filled (which may be a struct or an interface).</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">FindCode</span><span class="token punctuation">(</span>err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> code <span class="token builtin">string</span>
    <span class="token keyword">var</span> codeHolder <span class="token operator">*</span>withCode

    <span class="token keyword">if</span> <span class="token operator">!</span><span class="token function">As</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> <span class="token operator">&amp;</span>codeHolder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;unkown code&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> codeHolder<span class="token punctuation">.</span>code<span class="token punctuation">,</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If you call As, a bool is returned on which you can check whether it was successful.</p> <h2 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h2> <h2 id="defining-errors"><a href="#defining-errors" class="header-anchor">#</a> Defining Errors</h2> <p>For the sake of simplicity, you have seen examples where we place the errors above the functions. It would be better to
have an overview of all errors that can occur in the system. You can define your errors in <code>app/report/errors.go</code>:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> UserNotFound <span class="token operator">=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;user not found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>net<span class="token punctuation">.</span>StatusBadRequest
<span class="token keyword">var</span> Unauthorized <span class="token operator">=</span> UserError<span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>net<span class="token punctuation">.</span>StatusUnauthorized<span class="token punctuation">)</span>
</code></pre></div><h3 id="global-log-context"><a href="#global-log-context" class="header-anchor">#</a> Global Log Context</h3> <p>If you want to add information to all errors, you can append that in <code>app/report/errors.go</code>. In the following example
you can see that we apply <code>Status</code> and log <code>Level</code> globally:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> UserError <span class="token operator">=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>net<span class="token punctuation">.</span>StatusBadRequest<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Level</span><span class="token punctuation">(</span>log_level<span class="token punctuation">.</span>INFO<span class="token punctuation">)</span>
<span class="token keyword">var</span> Unauthorized <span class="token operator">=</span> UserError<span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>net<span class="token punctuation">.</span>StatusUnauthorized<span class="token punctuation">)</span>
<span class="token keyword">var</span> SessionInvalid <span class="token operator">=</span> Unauthorized<span class="token punctuation">.</span><span class="token function">Wrap</span><span class="token punctuation">(</span><span class="token string">&quot;session is not valid&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> SessionExpired <span class="token operator">=</span> Unauthorized<span class="token punctuation">.</span><span class="token function">Wrap</span><span class="token punctuation">(</span><span class="token string">&quot;session expired&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="information-provision"><a href="#information-provision" class="header-anchor">#</a> Information Provision</h3> <p>The <code>Debug</code> option in your <code>config/app.go</code> configuration file determines how much information about an error is actually
displayed to the user. By default, this option is set to respect the value of the <code>APP_DEBUG</code> environment variable,
which is stored in your <code>.env</code> file.</p> <p>For local development, you should set the <code>APP_DEBUG</code> environment variable to <code>true</code>. In your production environment,
this value should always be <code>false</code>. If the value is set to <code>true</code> in production, you risk exposing sensitive
configuration values to your application's end users.</p> <h3 id="ignoring-errors-by-type"><a href="#ignoring-errors-by-type" class="header-anchor">#</a> Ignoring Errors By Type</h3> <p>The <code>NoLogging</code> field in <code>config/errors.go</code> contains a slice of errors that will not be logged. For example, errors
resulting from 404 errors, as well as several other types of errors, are not written to your log files. You may add
other error types to this array as needed:</p> <div class="language-go extra-class"><pre class="language-go"><code>NoLogging<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">error</span><span class="token punctuation">{</span>
    report<span class="token punctuation">.</span>ValidationError<span class="token punctuation">,</span>
    report<span class="token punctuation">.</span>NotFoundError<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="custom-http-error-pages"><a href="#custom-http-error-pages" class="header-anchor">#</a> Custom HTTP Error Pages</h3> <p>Confetti makes it easy to display custom error pages. You can edit template <code>resources/views/error.gohtml</code> design your
own error page. The following variables can be used when using this template:</p> <div class="language-html extra-class"><pre class="language-html"><code>{{- /*gotype: github.com/confetti-framework/foundation/encoder.ErrorView*/ -}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{.Locale}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{.AppName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{.Status}} | {{.Message}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{.StackTrace}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>To add your own variables, you can edit the view placed in <code>resources/views/error.go</code>. Do you want to have even more
control over how you convert errors to html? Than you can replace the <code>encoder.ErrorToHtml</code> in <code>ResponseServiceProvider</code>
with your own encoder.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/docs/the-basics/validation.html" class="prev">
        Validation
      </a></span> <span class="next"><a href="/docs/docs/the-basics/logging.html">
        Logging
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.82cfd2e7.js" defer></script><script src="/docs/assets/js/3.b99d79b9.js" defer></script><script src="/docs/assets/js/14.f35a05b9.js" defer></script>
  </body>
</html>
